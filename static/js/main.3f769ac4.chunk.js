(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{19:function(e,t,l){},20:function(e,t,l){"use strict";l.r(t);var a=l(1),i=l.n(a),n=l(13),c=l.n(n),s=l(9),r=l(3),o=l(4),u=l(2),h=l(7),d=l(6),g=l(5),f=l(8);function m(e,t,l){for(var a=0,i=t.length-1,n=0;n<l;n++){var c=t[i-n];if("cellEmpty"===e.getCellType(c)){var s,r=e.getAllLegalNeighborIndex(c),o=b(e,r,t);a=o.length,(s=t).push.apply(s,Object(f.a)(o))}t=m(e,t,a)}return t}function b(e,t,l){var a,i=[],n=Object(g.a)(t);try{for(n.s();!(a=n.n()).done;){var c=a.value;"cellEmpty"===e.getCellType(c)&&!1===l.includes(c)&&i.push(c)}}catch(s){n.e(s)}finally{n.f()}return i}var v=function(e,t){var l=[],a=[];l.push(t),l=m(e,l,1),a.push.apply(a,Object(f.a)(l));for(var i=1;i<l.length;i++)a.push.apply(a,Object(f.a)(e.getAllLegalNeighborIndex(l[i])));return a},p=function(){function e(t,l){Object(r.a)(this,e),this.level=t,this.cells=l}return Object(o.a)(e,[{key:"getData",value:function(){return{size:this.level.size,cells:this.cells}}},{key:"numberOfHiddenCell",value:function(){var e=0;return this.cells.forEach((function(t){"hiddenCell"===t.state&&e++})),e}},{key:"applyToAllCells",value:function(e){var t,l=[],a=Object(g.a)(this.cells);try{for(a.s();!(t=a.n()).done;){var i=t.value;l.push(e(i))}}catch(n){a.e(n)}finally{a.f()}this.cells=[].concat(l)}},{key:"applyToAllLegalNeighbors",value:function(e,t){var l,a=this.getAllLegalNeighborIndex(e),i=Object(g.a)(a);try{for(i.s();!(l=i.n()).done;){var n=l.value;this.cells[n]=t(this.cells[n])}}catch(c){i.e(c)}finally{i.f()}}},{key:"applyToAllLegalNeighborsAndReturn",value:function(e,t){var l,a=this.getAllLegalNeighborIndex(e),i=[],n=Object(g.a)(a);try{for(n.s();!(l=n.n()).done;){var c=l.value;i.push(t(this.cells[c]))}}catch(s){n.e(s)}finally{n.f()}return i}},{key:"getAllLegalNeighborIndex",value:function(e){for(var t=this.neighbor(this.toXY(e)[0],this.toXY(e)[1]),l=[],a=0;a<8;a++)this.areCoordLegal(t[a])&&l.push(this.toIndex(t[a]));return l}},{key:"revealCellsOnNewRevealedCell",value:function(e){var t=this;"flaggedCell"!==this.getCellState(e)&&this.getCellsToReveal(e).forEach((function(e){"hiddenCell"===t.getCellState(e)&&t.setCellState(e,"revealedCell")}))}},{key:"getCellsToReveal",value:function(e){var t=[];return"cellEmpty"===this.getCellType(e)?t=Object(f.a)(v(this,e)):t.push(e),t}},{key:"areCoordLegal",value:function(e){var t=e[0],l=e[1];return!(t<0||t>=this.level.size||l<0||l>=this.level.size)}},{key:"neighbor",value:function(e,t){return[[e+1,t],[e+1,t+1],[e+1,t-1],[e,t-1],[e,t+1],[e-1,t],[e-1,t+1],[e-1,t-1]]}},{key:"toIndex",value:function(e){var t=e[0];return e[1]+t*this.level.size}},{key:"toXY",value:function(e){return[Math.floor(e/this.level.size),e%this.level.size]}},{key:"setCells",value:function(e){this.cells=e}},{key:"setCell",value:function(e,t){this.cells[e]=t}},{key:"pushCell",value:function(e){this.cells.push(e)}},{key:"getCell",value:function(e){return this.cells[e]}},{key:"getCellType",value:function(e){return this.cells[e].type}},{key:"getCellState",value:function(e){return this.cells[e].state}},{key:"setCellState",value:function(e,t){this.cells[e].state=t}}]),e}(),C=l.p+"static/media/cellHidden.735eb5ef.jpg",j=l.p+"static/media/cell1.3b39df01.jpg",O=l.p+"static/media/cell2.23e1794f.jpg",y=l.p+"static/media/cell3.ca6e83e8.jpg",k=l.p+"static/media/cell4.f34ecc9b.jpg",S=l.p+"static/media/cell5.6e730bfb.jpg",x=l.p+"static/media/cell6.d10c5034.jpg",G=l.p+"static/media/cell7.9b4a9320.jpg",w=l.p+"static/media/cell8.b707e64e.jpg",F=l.p+"static/media/cellFlag.3f40a9aa.jpg",T=l.p+"static/media/wrongFlag.4c9f9798.jpg",D=l.p+"static/media/cellEmpty.6285a556.jpg",L=l.p+"static/media/bomb.426ba0e8.jpg",N=l.p+"static/media/bombGO.3acc3234.jpg",E=l.p+"static/media/bombExplode.d57098fe.jpg",I={cellHidden:C,cell1:j,cell2:O,cell3:y,cell4:k,cell5:S,cell6:x,cell7:G,cell8:w,cellFlag:F,wrongFlag:T,cellEmpty:D,bomb:L,bombGO:N,bombFound:l.p+"static/media/bombFound.e30eeec9.jpg",bombExplode:E,cell1GO:l.p+"static/media/cell1GO.2e9a4ece.jpg",cell2GO:l.p+"static/media/cell2GO.e465500e.jpg",cell3GO:l.p+"static/media/cell3GO.6fb4c7b7.jpg",cell4GO:l.p+"static/media/cell4GO.37008616.jpg",cell5GO:l.p+"static/media/cell5GO.4ee670e2.jpg",cell6GO:l.p+"static/media/cell6GO.eaf7500d.jpg",cell7GO:l.p+"static/media/cell7GO.18591ca7.jpg",cell8GO:l.p+"static/media/cell8GO.53968326.jpg",cellEmptyGO:l.p+"static/media/cellEmptyGO.6124dbf2.jpg"},z=function(e,t){return{id:e,type:t,content:{hiddenCell:I.cellHidden,flaggedCell:I.cellFlag,revealedCell:I[t],gameOver:I[t+"GO"]},state:"hiddenCell"}},M=function(e,t){return{index:e,type:t,count:"bomb"===t?NaN:0}};var A=function(e){return 100*Math.random()};function H(e){if("counter"===e.type){var t=e.count;return t=(l=t+=1)<=(a=8)?l:a,e.count=t,e}return e;var l,a}function R(e,t){return"bomb"===e?"bomb":0===t?"cellEmpty":"cell"+t}var Y=function(e){var t=new p(e,[]);return function(e){(function(e){for(var t=e.level.difficulty,l=e.level.size,a=function(e,t){var l=Math.floor(e*e*t/100);return l+=function(e,t){var l=1/(1.8*e);return function(e,t){return Math.floor(Math.random()*(t-e+1)+e)}(-l*t,l*t)}(e,l),l}(l,t),i=0,n=[],c=[],s=0;s<l;s++)for(var r=0;r<l;r++)A(i)<t?(e.pushCell(M(i,"bomb")),n.push(i)):(e.pushCell(M(i,"counter")),c.push(i)),i++;!function(e,t,l,a){if(t.length<e)for(;t.length!==e;){var i=Math.floor(Math.random()*l.length),n=l[i];t.push(n),a.setCell(n,M(n,"bomb")),l.splice(i,1)}else if(t.length>e)for(;t.length!==e;){var c=Math.floor(Math.random()*l.length),s=t[c];l.push(s),a.setCell(s,M(s,"counter")),t.splice(c,1)}}(a,n,c,e)})(e),function(e){var t,l=Object(g.a)(e.cells);try{for(l.s();!(t=l.n()).done;){var a=t.value;"bomb"===a.type&&e.applyToAllLegalNeighbors(a.index,H)}}catch(i){l.e(i)}finally{l.f()}}(e),function(e){for(var t=[],l=0;l<e.cells.length;l++){var a=R(e.getCellType(l),e.getCell(l).count);t.push(z(e.getCell(l).index,a))}e.setCells(t)}(e)}(t),t},B=[{name:"Easy",size:10,difficulty:10},{name:"Very hard",size:18,difficulty:13},{name:"impossible",size:22,difficulty:18}],X=l(0),J=function(e){Object(h.a)(l,e);var t=Object(d.a)(l);function l(e){var a;return Object(r.a)(this,l),(a=t.call(this,e)).onClickedCell=a.props.onClickedCell,a.flagCell=a.props.flagCell,a.onFlagCell=a.onFlagCell.bind(Object(u.a)(a)),a.mouseDownHandler=a.mouseDownHandler.bind(Object(u.a)(a)),a}return Object(o.a)(l,[{key:"onFlagCell",value:function(){this.flagCell(this.id)}},{key:"mouseDownHandler",value:function(e){0===e.button&&this.onClickedCell(this.id,this.type),2===e.button&&(e.preventDefault(),this.flagCell(this.id))}},{key:"render",value:function(){return this.id=this.props.cellData.id,this.type=this.props.cellData.type,this.imgContent=this.props.cellData.content[this.props.cellData.state.toString()],Object(X.jsx)("div",{className:"cellDiv",onMouseDown:this.mouseDownHandler,onContextMenu:function(e){return e.preventDefault()},children:Object(X.jsx)("img",{className:"cellImg",src:this.imgContent,alt:"cell"+this.type})})}}]),l}(i.a.Component),P=function(e){return e()},W=function(e){var t=e.rowCount,l=e.size,a=e.cells,i=e.onClickedCell,n=e.flagCell;return P((function(){for(var e=[],c=0;c<l;c++)e.push(Object(X.jsx)("td",{children:Object(X.jsx)(J,{cellData:a[c+t*l],onClickedCell:i,flagCell:n})},c+t*l));return e})).map((function(e){return e}))},V=function(e){return Object(X.jsx)("div",{className:"gridDiv",children:Object(X.jsx)("table",{id:"gridTable",cellSpacing:"0",children:P((function(){for(var t=[],l=0;l<e.size;l++)t.push(Object(X.jsx)("tbody",{children:Object(X.jsx)("tr",{children:W(Object(s.a)(Object(s.a)({},e),{},{rowCount:l}))},l)}));return t})).map((function(e){return e}))})})},q=function(e){Object(h.a)(l,e);var t=Object(d.a)(l);function l(e){var a;return Object(r.a)(this,l),(a=t.call(this,e)).levelChosen=e.levelChosen,a.onLevelChosen=a.onLevelChosen.bind(Object(u.a)(a)),a}return Object(o.a)(l,[{key:"onLevelChosen",value:function(e){this.levelChosen(e.currentTarget.id)}},{key:"render",value:function(){var e=this;return Object(X.jsx)("div",{className:"LevelChoice",children:B.map((function(t,l){return Object(X.jsxs)("button",{id:l,onClick:e.onLevelChosen,children:[t.name," "]},l)}))})}}]),l}(i.a.Component),K=function(e){var t=e.gameState,l={};return l="beforeGame"===t.state?Object(X.jsx)("h3",{children:"Ready?"}):"isPlaying"===t.state?Object(X.jsx)("h3",{children:"Find them all !!! "}):"You win"===t.score.result?Object(X.jsxs)(i.a.Fragment,{children:[Object(X.jsxs)("h3",{children:[" ",t.score.result," !!! "]}),"You found all the ",t.score.bombFound," bomb(s) in ",t.score.tick," seconds ! Congratulation :)"]}):Object(X.jsxs)(i.a.Fragment,{children:[Object(X.jsxs)("h3",{children:[" ",t.score.result," !!! "]}),Object(X.jsxs)("p",{children:["You found ",t.score.bombFound," bomb(s)"]}),Object(X.jsxs)("p",{children:["There are ",t.score.remainingBomb," bomb(s) unfound"]}),Object(X.jsxs)("p",{children:["There are ",t.score.wrongFlag," wrong flag(s) "]})]}),Object(X.jsx)("div",{className:"resultDiv",children:l})},Q=function(e){var t=e.tick;return Object(X.jsxs)("div",{className:"timerDiv",children:["TIME : ",t]})},U=function(){return Object(X.jsxs)("div",{className:"contact",children:[Object(X.jsx)("p",{children:"Find the code here :"}),Object(X.jsxs)("p",{children:[" ",Object(X.jsx)("a",{href:"https://github.com/arthurlormeauwall/minesweeper",children:" github/arthurlormeau/minesweeper "})," "]}),Object(X.jsx)("p",{children:"Feel free to contact me : arthurlormeau@gmail.com"})]})},Z=(l(19),function(e){var t=e.chooseLevel,l=e.cells,a=e.size,i=e.onClickedCell,n=e.flagCell,c=e.gameState,s=e.tick;return Object(X.jsxs)("div",{id:"AppDiv",children:[Object(X.jsx)(q,{levelChosen:t}),Object(X.jsx)(Q,{tick:s}),Object(X.jsx)(V,{cells:l,size:a,onClickedCell:i,flagCell:n}),Object(X.jsx)(K,{gameState:c}),Object(X.jsx)(U,{})]})}),$=function(e){Object(h.a)(l,e);var t=Object(d.a)(l);function l(e){var a;return Object(r.a)(this,l),(a=t.call(this,e)).waitForSecondClick=!1,a.abortClickEvent=!1,a.clickCount=0,a.gridController=Y(B[0]),a.gameState={state:"beforeGame"},a.tick=0,a.state={grid:a.gridController.getData(),gameState:a.gameState,tick:a.tick},a.newGrid=a.newGame.bind(Object(u.a)(a)),a.onNewRevealedCell=a.onNewRevealedCell.bind(Object(u.a)(a)),a.onClickedCell=a.onClickedCell.bind(Object(u.a)(a)),a.flagCell=a.flagCell.bind(Object(u.a)(a)),a.chooseLevel=a.chooseLevel.bind(Object(u.a)(a)),a}return Object(o.a)(l,[{key:"chooseLevel",value:function(e){this.newGame(B[e])}},{key:"newGame",value:function(e){this.gridController=Y(e),this.gameState={state:"beforeGame"},this.killTimer(),this.tick=0,this.setState({grid:this.gridController.getData(),gameState:this.gameState,tick:this.tick})}},{key:"startGame",value:function(){this.gameState.state="isPlaying",this.launchTimer()}},{key:"onClickedCell",value:function(e,t){var l=this,a=this;this.waitForSecondClick=!0;setTimeout((function(){a.waitForSecondClick=!1}),150),(this.waitForSecondClick=!0)&&this.clickCount++;setTimeout((function(){a.clickCount>1?a.flagCell(e):a.onNewRevealedCell(e,t),l.clickCount=0}),150)}},{key:"onNewRevealedCell",value:function(e,t){this.checkIfFirstMove(),"gameOver"!==this.gameState.state&&"flaggedCell"!==this.getCellState(e)&&("bomb"===t?this.bombHasBeenfound(e):(this.gridController.revealCellsOnNewRevealedCell(e),this.setStateFromGridData(),this.checkIfThisIsEndGame()))}},{key:"checkIfFirstMove",value:function(){"beforeGame"===this.gameState.state&&this.startGame()}},{key:"bombHasBeenfound",value:function(e){this.gameState.score=this.getGameStats(),this.gridController.cells[e].content.gameOver=I.bombExplode,this.endGame(),this.youLoose()}},{key:"flagCell",value:function(e){"flaggedCell"===this.getCellState(e)?this.gridController.setCellState(e,"hiddenCell"):"hiddenCell"===this.getCellState(e)&&this.gridController.setCellState(e,"flaggedCell"),this.setStateFromGridData(),this.checkIfThisIsEndGame()}},{key:"launchTimer",value:function(){var e=this;this.timer=setInterval((function(){e.tick++,e.setState({grid:e.gridController.getData(),gameState:e.gameState,tick:e.tick})}),1e3)}},{key:"killTimer",value:function(){clearInterval(this.timer)}},{key:"setStateFromGridData",value:function(){this.setState({grid:this.gridController.getData(),gameState:this.gameState})}},{key:"checkIfThisIsEndGame",value:function(){0===this.gridController.numberOfHiddenCell()&&(this.gameState.score=this.getGameStats(),this.endGame(),this.endGameCheckingScore())}},{key:"youWin",value:function(){this.killTimer(),this.gameState.score.result="You win",this.setState({grid:this.gridController.getData(),gameState:this.gameState})}},{key:"youLoose",value:function(){this.killTimer(),this.gameState.score.result="You loose",this.setState({grid:this.gridController.getData(),gameState:this.gameState})}},{key:"setCellsToGameOverState",value:function(){this.gridController.applyToAllCells((function(e){return Object(s.a)(Object(s.a)({},e),{},{state:"gameOver"})}))}},{key:"endGame",value:function(){this.gameState.state="gameOver",this.setCellsToGameOverState()}},{key:"endGameCheckingScore",value:function(){0!==this.gameState.score.remainingBomb||0!==this.gameState.score.wrongFlag?this.youLoose():this.youWin()}},{key:"getGameStats",value:function(){var e=0,t=0,l=0;return this.gridController.cells.forEach((function(a){"flaggedCell"===a.state?"bomb"===a.type?(a.content.gameOver=I.bombFound,t++):(a.content.gameOver=I.wrongFlag,e++):"bomb"===a.type&&l++})),{wrongFlag:e,bombFound:t,remainingBomb:l,tick:this.tick}}},{key:"getCellState",value:function(e){return this.gridController.getCellState(e)}},{key:"render",value:function(){return Object(X.jsx)(Z,{onClickedCell:this.onClickedCell,flagCell:this.flagCell,chooseLevel:this.chooseLevel,tick:this.state.tick,cells:this.state.grid.cells,size:this.state.grid.size,gameState:this.state.gameState})}}]),l}(i.a.Component);c.a.render(Object(X.jsx)($,{}),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.3f769ac4.chunk.js.map