(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],{19:function(e,t,l){},20:function(e,t,l){"use strict";l.r(t);var a=l(1),n=l.n(a),i=l(13),s=l.n(i),c=l(3),r=l(4),o=l(2),u=l(7),h=l(6),g=l(5),d=l(8);function m(e,t,l){for(var a=0,n=t.length-1,i=0;i<l;i++){var s=t[n-i];if("cellEmpty"===e.getCellType(s)){var c,r=e.getAllLegalNeighborIndex(s),o=f(e,r,t);a=o.length,(c=t).push.apply(c,Object(d.a)(o))}t=m(e,t,a)}return t}function f(e,t,l){var a,n=[],i=Object(g.a)(t);try{for(i.s();!(a=i.n()).done;){var s=a.value;"cellEmpty"===e.getCellType(s)&&!1===l.includes(s)&&n.push(s)}}catch(c){i.e(c)}finally{i.f()}return n}var b=function(e,t){var l=[],a=[];l.push(t),l=m(e,l,1),a.push.apply(a,Object(d.a)(l));for(var n=1;n<l.length;n++)a.push.apply(a,Object(d.a)(e.getAllLegalNeighborIndex(l[n])));return a},v=function(){function e(t,l){Object(c.a)(this,e),this.level=t,this.cells=l}return Object(r.a)(e,[{key:"getData",value:function(){return{size:this.level.size,cells:this.cells}}},{key:"numberOfHiddenCell",value:function(){var e=0;return this.cells.forEach((function(t){"hiddenCell"===t.state&&e++})),e}},{key:"applyToAllCells",value:function(e){for(var t=0;t<this.size*this.size;t++)this.cells[t]=e(this.cells[t])}},{key:"applyToAllLegalNeighbors",value:function(e,t){var l,a=this.getAllLegalNeighborIndex(e),n=Object(g.a)(a);try{for(n.s();!(l=n.n()).done;){var i=l.value;this.cells[i]=t(this.cells[i])}}catch(s){n.e(s)}finally{n.f()}}},{key:"applyToAllLegalNeighborsAndReturn",value:function(e,t){var l,a=this.getAllLegalNeighborIndex(e),n=[],i=Object(g.a)(a);try{for(i.s();!(l=i.n()).done;){var s=l.value;n.push(t(this.cells[s]))}}catch(c){i.e(c)}finally{i.f()}return n}},{key:"getAllLegalNeighborIndex",value:function(e){for(var t=this.neighbor(this.toXY(e)[0],this.toXY(e)[1]),l=[],a=0;a<8;a++)this.areCoordLegal(t[a])&&l.push(this.toIndex(t[a]));return l}},{key:"getCellsToReveal",value:function(e){var t=[];return"cellEmpty"===this.getCellType(e)?t=Object(d.a)(b(this,e)):t.push(e),t}},{key:"areCoordLegal",value:function(e){var t=e[0],l=e[1];return!(t<0||t>=this.level.size||l<0||l>=this.level.size)}},{key:"neighbor",value:function(e,t){return[[e+1,t],[e+1,t+1],[e+1,t-1],[e,t-1],[e,t+1],[e-1,t],[e-1,t+1],[e-1,t-1]]}},{key:"toIndex",value:function(e){var t=e[0];return e[1]+t*this.level.size}},{key:"toXY",value:function(e){return[Math.floor(e/this.level.size),e%this.level.size]}},{key:"setCells",value:function(e){this.cells=e}},{key:"setCell",value:function(e,t){this.cells[e]=t}},{key:"pushCell",value:function(e){this.cells.push(e)}},{key:"getCell",value:function(e){return this.cells[e]}},{key:"getCellType",value:function(e){return this.cells[e].type}},{key:"getCellState",value:function(e){return this.cells[e].state}}]),e}(),p=l.p+"static/media/cellHidden.735eb5ef.jpg",j=l.p+"static/media/cell1.3b39df01.jpg",O=l.p+"static/media/cell2.23e1794f.jpg",C=l.p+"static/media/cell3.ca6e83e8.jpg",y=l.p+"static/media/cell4.f34ecc9b.jpg",k=l.p+"static/media/cell5.6e730bfb.jpg",S=l.p+"static/media/cell6.d10c5034.jpg",x=l.p+"static/media/cell7.9b4a9320.jpg",G=l.p+"static/media/cell8.b707e64e.jpg",w=l.p+"static/media/cellFlag.3f40a9aa.jpg",M=l.p+"static/media/wrongFlag.4c9f9798.jpg",D=l.p+"static/media/cellEmpty.6285a556.jpg",L=l.p+"static/media/bomb.426ba0e8.jpg",F=l.p+"static/media/bombGO.3acc3234.jpg",T=l.p+"static/media/bombExplode.d57098fe.jpg",N={cellHidden:p,cell1:j,cell2:O,cell3:C,cell4:y,cell5:k,cell6:S,cell7:x,cell8:G,cellFlag:w,wrongFlag:M,cellEmpty:D,bomb:L,bombGO:F,bombFound:l.p+"static/media/bombFound.e30eeec9.jpg",bombExplode:T,cell1GO:l.p+"static/media/cell1GO.2e9a4ece.jpg",cell2GO:l.p+"static/media/cell2GO.e465500e.jpg",cell3GO:l.p+"static/media/cell3GO.6fb4c7b7.jpg",cell4GO:l.p+"static/media/cell4GO.37008616.jpg",cell5GO:l.p+"static/media/cell5GO.4ee670e2.jpg",cell6GO:l.p+"static/media/cell6GO.eaf7500d.jpg",cell7GO:l.p+"static/media/cell7GO.18591ca7.jpg",cell8GO:l.p+"static/media/cell8GO.53968326.jpg",cellEmptyGO:l.p+"static/media/cellEmptyGO.6124dbf2.jpg"},z=function(e,t){return{id:e,type:t,content:{hiddenCell:N.cellHidden,flaggedCell:N.cellFlag,revealedCell:N[t],gameOver:N[t+"GO"]},state:"hiddenCell"}},E=function(e,t){return{index:e,type:t,count:"bomb"===t?NaN:0}};var R=function(e){return 100*Math.random()};function A(e){if("counter"===e.type){var t=e.count;return t=(l=t+=1)<=(a=8)?l:a,e.count=t,e}return e;var l,a}function I(e,t){return"bomb"===e?"bomb":0===t?"cellEmpty":"cell"+t}var H=function(e){var t=new v(e,[]);return function(e){(function(e){for(var t=e.level.difficulty,l=e.level.size,a=function(e,t){var l=Math.floor(e*e*t/100);return l+=function(e,t){var l=1/(1.8*e);return function(e,t){return Math.floor(Math.random()*(t-e+1)+e)}(-l*t,l*t)}(e,l),l}(l,t),n=0,i=[],s=[],c=0;c<l;c++)for(var r=0;r<l;r++)R(n)<t?(e.pushCell(E(n,"bomb")),i.push(n)):(e.pushCell(E(n,"counter")),s.push(n)),n++;!function(e,t,l,a){if(t.length<e)for(;t.length!==e;){var n=Math.floor(Math.random()*l.length),i=l[n];t.push(i),a.setCell(i,E(i,"bomb")),l.splice(n,1)}else if(t.length>e)for(;t.length!==e;){var s=Math.floor(Math.random()*l.length),c=t[s];l.push(c),a.setCell(c,E(c,"counter")),t.splice(s,1)}}(a,i,s,e)})(e),function(e){var t,l=Object(g.a)(e.cells);try{for(l.s();!(t=l.n()).done;){var a=t.value;"bomb"===a.type&&e.applyToAllLegalNeighbors(a.index,A)}}catch(n){l.e(n)}finally{l.f()}}(e),function(e){for(var t=[],l=0;l<e.cells.length;l++){var a=I(e.getCellType(l),e.getCell(l).count);t.push(z(e.getCell(l).index,a))}e.setCells(t)}(e)}(t),t},Y=[{name:"Easy",size:10,difficulty:11},{name:"Very hard",size:18,difficulty:13},{name:"impossible",size:22,difficulty:18}],B=l(12),X=l(0),J=function(e){Object(u.a)(l,e);var t=Object(h.a)(l);function l(e){var a;return Object(c.a)(this,l),(a=t.call(this,e)).onRevealedCell=a.props.onRevealedCell,a.flagCell=a.props.flagCell,a.onFlagCell=a.onFlagCell.bind(Object(o.a)(a)),a.mouseDownHandler=a.mouseDownHandler.bind(Object(o.a)(a)),a}return Object(r.a)(l,[{key:"onFlagCell",value:function(){this.flagCell(this.id)}},{key:"mouseDownHandler",value:function(e){0===e.button&&this.onRevealedCell(this.id,this.type),2===e.button&&(e.preventDefault(),this.flagCell(this.id))}},{key:"render",value:function(){return this.id=this.props.cellData.id,this.type=this.props.cellData.type,this.imgContent=this.props.cellData.content[this.props.cellData.state.toString()],Object(X.jsx)("div",{className:"cellDiv",onMouseDown:this.mouseDownHandler,onContextMenu:function(e){return e.preventDefault()},children:Object(X.jsx)("img",{className:"cellImg",src:this.imgContent,alt:"cell"+this.type})})}}]),l}(n.a.Component),P=function(e){return e()},W=function(e){var t=e.rowCount,l=e.size,a=e.cells,n=e.onRevealedCell,i=e.flagCell;return P((function(){for(var e=[],s=0;s<l;s++)e.push(Object(X.jsx)("td",{children:Object(X.jsx)(J,{cellData:a[s+t*l],onRevealedCell:n,flagCell:i})},s+t*l));return e})).map((function(e){return e}))},V=function(e){return Object(X.jsx)("div",{className:"gridDiv",children:Object(X.jsx)("table",{id:"gridTable",cellSpacing:"0",children:P((function(){for(var t=[],l=0;l<e.size;l++)t.push(Object(X.jsx)("tbody",{children:Object(X.jsx)("tr",{children:W(Object(B.a)(Object(B.a)({},e),{},{rowCount:l}))},l)}));return t})).map((function(e){return e}))})})},q=function(e){Object(u.a)(l,e);var t=Object(h.a)(l);function l(e){var a;return Object(c.a)(this,l),(a=t.call(this,e)).levelChosen=e.levelChosen,a.onLevelChosen=a.onLevelChosen.bind(Object(o.a)(a)),a}return Object(r.a)(l,[{key:"onLevelChosen",value:function(e){this.levelChosen(e.currentTarget.id)}},{key:"render",value:function(){var e=this;return Object(X.jsx)("div",{className:"LevelChoice",children:Y.map((function(t,l){return Object(X.jsxs)("button",{id:l,onClick:e.onLevelChosen,children:[t.name," "]},l)}))})}}]),l}(n.a.Component),K=function(e){var t=e.gameState,l={};return l="beforeGame"===t.state?Object(X.jsx)("h3",{children:"Ready?"}):"isPlaying"===t.state?Object(X.jsx)("h3",{children:"Find them all !!! "}):"You win"===t.score.result?Object(X.jsxs)(n.a.Fragment,{children:[Object(X.jsxs)("h3",{children:[" ",t.score.result," !!! "]}),"You found all the ",t.score.bombFound," bomb(s) in ",t.score.tick," seconds ! Congratulation :)"]}):Object(X.jsxs)(n.a.Fragment,{children:[Object(X.jsxs)("h3",{children:[" ",t.score.result," !!! "]}),Object(X.jsxs)("p",{children:["You found ",t.score.bombFound," bomb(s)"]}),Object(X.jsxs)("p",{children:["There are ",t.score.remainingBomb," bomb(s) unfound"]}),Object(X.jsxs)("p",{children:["There are ",t.score.wrongFlag," wrong flag(s) "]})]}),Object(X.jsx)("div",{className:"resultDiv",children:l})},Q=function(e){var t=e.tick;return Object(X.jsxs)("div",{className:"timerDiv",children:["TIME : ",t]})},U=function(){return Object(X.jsxs)("div",{className:"contact",children:[Object(X.jsx)("p",{children:"Find the code here :"}),Object(X.jsxs)("p",{children:[" ",Object(X.jsx)("a",{href:"https://github.com/arthurlormeauwall/minesweeper",children:" github/arthurlormeau/minesweeper "})," "]}),Object(X.jsx)("p",{children:"Feel free to contact me : arthurlormeau@gmail.com"})]})},Z=(l(19),function(e){var t=e.chooseLevel,l=e.cells,a=e.size,n=e.onRevealedCell,i=e.flagCell,s=e.gameState,c=e.tick;return Object(X.jsxs)("div",{id:"AppDiv",children:[Object(X.jsx)(q,{levelChosen:t}),Object(X.jsx)(Q,{tick:c}),Object(X.jsx)(V,{cells:l,size:a,onRevealedCell:n,flagCell:i}),Object(X.jsx)(K,{gameState:s}),Object(X.jsx)(U,{})]})}),$=function(e){Object(u.a)(l,e);var t=Object(h.a)(l);function l(e){var a;return Object(c.a)(this,l),(a=t.call(this,e)).gridManager=H(Y[0]),a.gameState={state:"beforeGame"},a.tick=0,a.state={grid:a.gridManager.getData(),gameState:a.gameState,tick:a.tick},a.newGrid=a.newGame.bind(Object(o.a)(a)),a.onNewRevealedCell=a.onNewRevealedCell.bind(Object(o.a)(a)),a.flagCell=a.flagCell.bind(Object(o.a)(a)),a.chooseLevel=a.chooseLevel.bind(Object(o.a)(a)),a}return Object(r.a)(l,[{key:"chooseLevel",value:function(e){this.newGame(Y[e])}},{key:"newGame",value:function(e){this.gridManager=H(e),this.gameState={state:"beforeGame"},this.killTimer(),this.tick=0,this.setState({grid:this.gridManager.getData(),gameState:this.gameState,tick:this.tick})}},{key:"startGame",value:function(){this.gameState.state="isPlaying",this.launchTimer()}},{key:"onNewRevealedCell",value:function(e,t){var l=this,a=this.gridManager.getCellsToReveal(e);"beforeGame"===this.gameState.state&&this.startGame(),"flaggedCell"!==this.getCellState(e)&&(a.forEach((function(e){"hiddenCell"===l.getCellState(e)&&l.setStateCell(e,"revealedCell")})),"bomb"===t&&this.bombHasBeenfound(e))}},{key:"bombHasBeenfound",value:function(e){this.gameState.score=this.endGameAndGetScore(),this.gridManager.cells[e].content.gameOver=N.bombExplode,this.youLoose()}},{key:"flagCell",value:function(e){"flaggedCell"===this.getCellState(e)?this.setStateCell(e,"hiddenCell"):"hiddenCell"===this.getCellState(e)&&this.setStateCell(e,"flaggedCell")}},{key:"launchTimer",value:function(){var e=this;this.timer=setInterval((function(){e.tick++,e.setState({grid:e.gridManager.getData(),gameState:e.gameState,tick:e.tick})}),1e3)}},{key:"killTimer",value:function(){clearInterval(this.timer)}},{key:"setStateCell",value:function(e,t){this.gridManager.cells[e].state=t,this.setState({grid:this.gridManager.getData(),gameState:this.gameState}),0===this.gridManager.numberOfHiddenCell()&&(this.gameState.score=this.endGameAndGetScore(),0!==this.gameState.score.remainingBomb||0!==this.gameState.score.wrongFlag?this.youLoose():this.youWin())}},{key:"youWin",value:function(){this.killTimer(),this.gameState.score.result="You win",this.setState({grid:this.gridManager.getData(),gameState:this.gameState})}},{key:"youLoose",value:function(){this.killTimer(),this.gameState.score.result="You loose",this.setState({grid:this.gridManager.getData(),gameState:this.gameState})}},{key:"endGameAndGetScore",value:function(e){this.gameState.state="gameOver";var t=0,l=0,a=0;return this.gridManager.cells.forEach((function(e){"flaggedCell"===e.state?"bomb"===e.type?(e.state="gameOver",e.content.gameOver=N.bombFound,l++):(e.state="gameOver",e.content.gameOver=N.wrongFlag,t++):(e.state="gameOver","bomb"===e.type&&a++)})),{wrongFlag:t,bombFound:l,remainingBomb:a,tick:this.tick}}},{key:"getCellState",value:function(e){return this.gridManager.getCellState(e)}},{key:"render",value:function(){return Object(X.jsx)(Z,{onRevealedCell:this.onNewRevealedCell,flagCell:this.flagCell,chooseLevel:this.chooseLevel,tick:this.state.tick,cells:this.state.grid.cells,size:this.state.grid.size,gameState:this.state.gameState})}}]),l}(n.a.Component);s.a.render(Object(X.jsx)($,{}),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.dde25fe8.chunk.js.map